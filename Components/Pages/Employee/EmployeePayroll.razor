@using MudBlazor
@using CapstoneBlazorApp.Dtos
@using Microsoft.AspNetCore.Components.Authorization
@page "/employee-payroll"
@namespace CapstoneBlazorApp.Components.Pages

<AuthorizeView>
    <Authorized>
        <MudStack AlignItems=AlignItems.Center JustifyContent=Justify.Center Style="height: 100vh;">
    <MudText Typo="Typo.h6">Hours Worked: @totalHours</MudText>
    <MudText Typo="Typo.h6">Hourly Rate: @hourlyRate</MudText>
    <MudText Typo="Typo.h6">Total Pay: @totalPay</MudText>


<MudTable Style="width: 100%;" Items="@payStubs" Breakpoint="Breakpoint.None" Elevation="1" Bordered="true" Hover="true">
    <HeaderContent>
        <MudTh>Period</MudTh>
        <MudTh>Gross Pay</MudTh>
        <MudTh>Net Pay</MudTh>    </HeaderContent>    <RowTemplate Context="payStub">
        <MudTd>@payStub.Period</MudTd>
        <MudTd>@payStub.Gross.ToString("C")</MudTd>
        <MudTd>@payStub.Net.ToString("C")</MudTd>    </RowTemplate>
</MudTable>

</MudStack>
    </Authorized>
    <NotAuthorized>
        <RedirectToLogin />
    </NotAuthorized>
</AuthorizeView>

@code {
    double totalHours = 0;
    double hourlyRate = 20.0;
    double totalPay => totalHours * hourlyRate;

    private List<CapstoneBlazorApp.Dtos.PayStubDto> payStubs = new List<CapstoneBlazorApp.Dtos.PayStubDto>
        {
            //random paystubs with random string period, decimal gross, decimal net            new CapstoneBlazorApp.Dtos.PayStubDto ("Jan 2024", 3200.00m, 2560.00m),
            new CapstoneBlazorApp.Dtos.PayStubDto ("Feb 2024", 3000.00m, 2400.00m),
            new CapstoneBlazorApp.Dtos.PayStubDto ("Mar 2024", 3400.00m, 2720.00m)
        };  
    protected override async Task OnInitializedAsync()
    {
        // Simulate fetching hours worked from a service
        await Task.Delay(500); // Simulate async call
        totalHours = 160; // Example value

    }

}
